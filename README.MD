# ğŸ”— HubSpot Integration - Spring Boot

Este projeto tem como objetivo integrar uma aplicaÃ§Ã£o Spring Boot com a API do **HubSpot**, utilizando **OAuth 2.0** para autenticaÃ§Ã£o e autorizaÃ§Ã£o, e permitindo operaÃ§Ãµes de leitura e escrita de contatos.

---

## ğŸ“ Estrutura do Projeto

```bash

com.projeto.hubspot_integration
â”œâ”€â”€ client        # Interfaces Feign para comunicaÃ§Ã£o com APIs externas
â”œâ”€â”€ controller    # Endpoints REST da aplicaÃ§Ã£o
â”œâ”€â”€ dto           # Objetos de transferÃªncia de dados
â”œâ”€â”€ exceptions    # ManipulaÃ§Ã£o de erros e exceÃ§Ãµes customizadas
â”œâ”€â”€ service       # Camada de lÃ³gica de negÃ³cio
â”œâ”€â”€ token         # LÃ³gica de obtenÃ§Ã£o e gerenciamento de tokens OAuth
â””â”€â”€ webhook       # LÃ³gica de recepÃ§Ã£o de webhooks HubSpot (se aplicÃ¡vel)
```
## ğŸ“ VariÃ¡veis de Ambiente

```bash

CLIENT_ID_HUBSPOT=
CLIENT_SECRET_HUBSPOT=
REDIRECT_URI_HUBSPOT=http://localhost:8080/api/v1/oauth/callback
SCOPE_HUBSPOT=oauth,crm.objects.contacts.write,crm.objects.contacts.read
BASE_URL_API=https://api.hubapi.com
BASE_URL=https://app.hubspot.com
```

## ğŸ“¡ Endpoints
````
ğŸ” AutenticaÃ§Ã£o
GET /api/v1/oauth/authorization
Inicia o processo de login com o HubSpot.

GET /api/v1/oauth/callback
Recebe o callback do HubSpot e gera o token.
````

### ğŸ‘¥ Lista de contatos

````
GET /api/v1/contacts
Lista todos os contatos da conta HubSpot vinculada.

 [
    {
        "id": "116494280747",
        "email": "bh@hubspot.com",
        "firstName": "Brian",
        "lastName": "Halligan (Sample Contact)",
        "createdAt": "2025-04-23T23:33:54.255Z"
    }
 ]
````


### ğŸ‘¤ Cria um novo contato:
````
    POST /api/v1/contacts
    Cria um novo contato na conta HubSpot vinculada.
    {
        "firstName": "JoÃ£o",
        "lastName": "Silva",
        "email": "joao.silva@example.com"
    }
````

### âŒ Deleta um Contato:
````
    DELETE /api/v1/contacts/{id}
    Deleta um contato a partir do ID
``````



## ğŸ› ï¸ Tecnologias Utilizadas
````
Java 17

Spring Boot 3.4.4

Spring Web

Spring Validation

Spring Cloud OpenFeign

Lombok
````

# ğŸš€ IntegraÃ§Ã£o com HubSpot

Este guia mostra como configurar seu aplicativo no HubSpot e integrÃ¡-lo com seu projeto Spring Boot para autenticaÃ§Ã£o e recebimento de webhooks.

---

## ğŸ§¾ PrÃ©-requisitos

- Conta no [HubSpot](https://developers.hubspot.com/)
- AplicaÃ§Ã£o Spring Boot rodando localmente (ex: `http://localhost:8080`)
- [Ngrok](https://ngrok.com/) instalado e configurado

---

## ğŸ”§ ConfiguraÃ§Ã£o no HubSpot

1. **Crie uma conta no HubSpot**  
   Acesse [HubSpot Developer](https://developers.hubspot.com/) e crie sua conta.

2. **Crie um aplicativo no HubSpot**  
   VÃ¡ atÃ© **"Aplicativos"** no painel de desenvolvedor e clique em **"Criar aplicativo"** (ou edite um existente).

3. **Configurar autenticaÃ§Ã£o OAuth**
    - VÃ¡ atÃ© a aba **"AutenticaÃ§Ã£o"**
    - Copie o **Client ID** e o **Client Secret**
    - No seu projeto, adicione essas credenciais no `application.properties` ou no `.env`:
      ```properties
      hubspot.client-id=SEU_CLIENT_ID
      hubspot.client-secret=SEU_CLIENT_SECRET
      ```

4. **Adicionar URL de redirecionamento**
    - Em **"URLs de redirecionamento"**, adicione:
      ```
      http://localhost:8080/api/v1/oauth/callback
      ```

5. **Selecionar escopos (Scopes)**
    - `oauth`
    - `crm.objects.contacts.write`
    - `crm.objects.contacts.read`

6. **Configurar Webhook**
    - Na aba **"Webhooks"**, adicione o endpoint gerado pelo Ngrok:
      ```
      https://seu-endereco.ngrok-free.app/webhook
      ```

7. **Criar assinatura de eventos**
    - Objeto: **Contato**
    - Evento: **Criado**

8. **Teste**
    - Crie um novo contato no HubSpot e verifique se o evento chega ao endpoint `/webhook`.

---

# ğŸ§ª Executando o Projeto

VocÃª pode rodar este projeto de duas formas: usando **Docker** ou diretamente na **IDE**.

---

## ğŸ§¾ PrÃ©-requisitos

- Java 17 ou superior
- Docker e Docker Compose instalados (se for usar Docker)
- IDE com suporte a Spring Boot (como IntelliJ ou Eclipse)

---

## ğŸ³ Rodando com Docker

1. **Clonar o repositÃ³rio**
    ```bash
    git clone https://github.com/rafaelsantos01/meetime.git
    cd meetime
    ```

2. **Configurar variÃ¡veis de ambiente**  
   Edite o arquivo `docker-compose.yml` e adicione as variÃ¡veis necessÃ¡rias.


3. **Build do projeto**
    ```bash
    ./mvnw clean package
    ```

4. **Subir os containers**
    ```bash
    docker-compose up
    ```

---

## ğŸ’» Rodando na IDE

1. **Clonar o repositÃ³rio**
    ```bash
    git clone https://github.com/rafaelsantos01/meetime.git
    cd meetime
    ```

2. **Configurar variÃ¡veis de ambiente**  
   VocÃª pode usar um dos mÃ©todos abaixo:
    - Editar o arquivo `src/main/resources/application.properties`
    - Criar um arquivo `.env` com as variÃ¡veis necessÃ¡rias

3. **Executar a aplicaÃ§Ã£o**  
   Na sua IDE, execute a classe principal do projeto.


# ğŸ›œ Usando o Ngrok

## ğŸ› ï¸ InstalaÃ§Ã£o do Ngrok
1. **Baixar o Ngrok**  
   Acesse [ngrok.com](https://ngrok.com/download) e siga as instruÃ§Ãµes de instalaÃ§Ã£o para o seu sistema operacional.
2. **Autenticar o Ngrok**  
   ApÃ³s a instalaÃ§Ã£o, vocÃª precisarÃ¡ autenticar o Ngrok com sua conta. Execute o seguinte comando no terminal:
   ```bash
   ngrok authtoken SEU_TOKEN
   ```
   Substitua `SEU_TOKEN` pelo token que vocÃª encontra na sua conta do Ngrok.
3. **Iniciar o Ngrok**  
   Para expor sua aplicaÃ§Ã£o Spring Boot, execute o seguinte comando:
   ```bash
   ngrok http 8080
   ```

